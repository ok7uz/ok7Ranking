{% extends 'base.html' %}

{% block og_canonical %}{% url 'matches' %}{% endblock %}
{% block og_meta %} FIFA Matches and teams' points {% endblock %}
{% block og_title %} FIFA Matches and teams' points {% endblock %}

{% block canonical %}{% url 'matches' %}{% endblock %}
{% block meta %} FIFA Matches and teams' points {% endblock %}
{% block title %} FIFA Matches and teams' points {% endblock %}

{% block header %}
    <h1 class="m-0 align-middle display-6 text-white" style="font-weight: 500">
        MATCHES
    </h1>
    <h2 class="fs-6 text-white">International FIFA National Football Teams Matches</h2>
{% endblock %}

{% block body %}
    <div class="text-center m-auto">
        {% if not matches %}
            <div class="mt-5 py-1 bg-secondary bg-opacity-25 text-black py-2 " style="font-size: 1.1em; border-radius: 2px;">
NO MATCHES
                </div>
        {% endif %}
  
         <p class="fw-normal py-2">
            {% if paginator.num_pages > 1 %}
                {% for i in paginator.page_range %}
                    {% if i > 1 %}
                        <a class="px-1 btn text-decoration-none py-1 text-center" href="{% url 'matches' %}?page={{ i }}" style="width: 30px; {% if request.GET.page == i|slugify or 'page' not in request.GET and i == 1 %} background: #4279A8; color: white; {% else %} background: #DDD; color: black; {% endif %} border-radius: 4px; font-size: 0.9em; line-height: 1.1">{{ i }}</a>
                    {% else %}
                        <a class="px-1 btn text-decoration-none py-1 text-center" href="{% url 'matches' %}" style="width: 30px; {% if request.GET.page == i|slugify or 'page' not in request.GET and i == 1 %} background: #4279A8; color: white; {% else %} background: #DDD; color: black; {% endif %} border-radius: 4px; font-size: 0.9em; line-height: 1.1">{{ i }}</a>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </p>

        {% regroup matches by date as date_list %}
        {% for date in date_list %}
            
            {% regroup date.list by tournament as tour_list %}
             
            {% for tour in tour_list %}
                <div class="col-md-6 p-0 m-auto mb-3">
		<div class="p-0 pe-1 text-white" style="margin-bottom: 12px">
                       		<div style="padding: 2px 0; background:  #4279A8; font-size: 14px; border-radius: 4px;">{{ tour.grouper }}</div>
			</div>


                {% for match in tour.list %}
                  <div class="row mx-0 p-0" style="margin-bottom: 12px">
			<div class="col-auto d-flex px-2 condensed" style="background: #EEE; font-size: 14px; justify-content: center; align-items:center; border-radius: 4px;">
                       		{{ date.grouper|date:"d.m" }}	
			</div>
			<div class="col p-0">
                   <a class="row my-0 mx-1 text-decoration-none" style="color: inherit" href="{% url 'country' match.team1.short_name %}">
	<div class="col-auto py-0 ps-1 pe-0" style="font-size: 13px; justify-content: center; align-items:center">
		<img class="m-0 border border-dark" src="{{ match.team1.flag.url }}" width="28" height="21.5" alt="{{ match.team1.name }}'s flag" style="border-radius: 10%; border: 1px solid black" loading="lazy">
	</div>
	<div class="col py-0 px-0 ps-1 align-middle text-start">
                <div class="d-flex px-2" style="background: #F0F0F0; font-size: 14px; height: 21px; align-items:center; border-radius: 4px;">
			{{ match.team1.name }}
		</div>
	</div>
        {%if match.is_penalty %}
        <div class="col-auto py-0 ps-1 pe-0">
		<div class="d-flex border border-white" style="border-radius: 4px; background: #EEE; width: 25px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
			{{ match.goal1_pen }}
		</div>
	</div>
        {% endif %}
	<div class="col-auto py-0 ps-1 pe-0">
		<div class="d-flex fw-semibold border border-white" style="border-radius: 4px; background: #4279A860; width: 25px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
			{% if match.goal1 is not None %}{{ match.goal1 }}{% else %}-{% endif %}
		</div>
	</div>
	<div class="col-auto py-0 ps-1 text-white pe-0 condensed">
		{% if match.points1_change < 0 %}
			<div class="d-flex border border-white" style="border-radius: 4px; background: #D04343; width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				{{ match.points1_change|floatformat:2 }}
			</div>
		{% elif match.points1_change > 0 %}
			<div class="d-flex border border-white" style="border-radius: 4px; background: #418500D0; width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				+{{ match.points1_change|floatformat:2 }}
			</div>
		{% else %}
			<div class="d-flex text-white" style="width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				.
			</div>
		{% endif %}
	</div>
</a>

<a class="row mb-0 mx-1 text-decoration-none" style="color: inherit; margin-top: 3px" href="{% url 'country' match.team2.short_name %}">
	<div class="col-auto py-0 ps-1 pe-0" style="font-size: 13px; justify-content: center; align-items:center">
		<img class="m-0 border border-dark" src="{{ match.team2.flag.url }}" width="28" height="21.5" alt="{{ match.team2.name }}'s flag" style="border-radius: 10%; border: 1px solid black" loading="lazy">
	</div>
	<div class="col py-0 px-0 ps-1 align-middle text-start">
                <div class="d-flex px-2" style="border-radius: 4px; background: #F0F0F0; font-size: 14px; height: 21px; align-items:center">
			{{ match.team2.name }}
		</div>
	</div>
	{%if match.is_penalty %}
        <div class="col-auto py-0 ps-1 pe-0">
		<div class="d-flex border border-white" style="border-radius: 4px; background: #EEE; width: 25px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
			{{ match.goal2_pen }}
		</div>
	</div>
        {% endif %}
	<div class="col-auto py-0 ps-1 pe-0">
		<div class="d-flex fw-semibold border border-white" style="border-radius: 4px; background: #4279A860; width: 25px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
			{% if match.goal2 is not None %}{{ match.goal2 }}{% else %}-{% endif %}
		</div>
	</div>
	<div class="col-auto py-0 ps-1 pe-0 condensed text-white">
		{% if match.points2_change < 0 %}
			<div class="d-flex border border-white" style="border-radius: 4px; background: #D04343; width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				{{ match.points2_change|floatformat:2 }}
			</div>
		{% elif match.points2_change > 0 %}
			<div class="d-flex border border-white" style="border-radius: 4px; background: #418500D0; width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				+{{ match.points2_change|floatformat:2 }}
			</div>
		{% else %}
			<div class="d-flex" style="width: 50px; font-size: 13px; height: 21px; justify-content: center; align-items:center">
				.
			</div>
		{% endif %}
	</div>
</a>
</div>
</div>
                {%  endfor %}
             </div>
            {% endfor %}
        {% endfor %}

    </div>
{% endblock %}